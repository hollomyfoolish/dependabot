# This workflow will try to test, validate and merge the pull request genetated by denpandabot

name: Dependabot Auto Merge

on:
  pull_request_target:
    types:
      - opened
      - synchronize
      - reopened

jobs:
  auto-merge:

    runs-on: ["runner-on-mymac"] 
    # if: github.actor == 'dependabot[bot]'

    steps:
    - name: Print Infomation
      run: echo ${{ github.actor }}
    - uses: actions/checkout@v4

    - name: Build with Maven
      run: mvn -B package --file pom.xml

    - name: Some required tests
      run: echo some tests for auto merge pull request generated by dependabot
      env:
        GITHUB_TOKEN: ${{ github.token }}

    - name: Auto Merge Dependabot PRs
      run: |
        git fetch origin
        git merge origin/${{ github.head_ref }}
        git push origin ${{ github.base_ref }}
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
